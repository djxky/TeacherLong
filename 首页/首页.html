<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>AI 龙老师 - V8.0 视觉与逻辑优化版</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+SC:wght@400;500;700;900&family=Ma+Shan+Zheng&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', 'Noto Sans SC', sans-serif; background: linear-gradient(180deg, #F3E8FF 0%, #E8F4FD 50%, #E0F2FE 100%); display: flex; align-items: center; justify-content: center; min-height: 100vh; margin: 0; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .card-press:active { transform: scale(0.98); transition: transform 0.1s; }
        
        /* === iPhone 16 Pro 机身模拟 === */
        .iphone-frame {
            width: 393px; height: 852px; background: linear-gradient(180deg, #F3E8FF 0%, #E8F4FD 50%, #E0F2FE 100%); position: relative; overflow: hidden;
            box-shadow: 0 0 0 12px #333, 0 0 0 13px #555, 0 20px 50px rgba(0,0,0,0.3);
            border-radius: 50px;
        }
        .dynamic-island {
            position: absolute; top: 11px; left: 50%; transform: translateX(-50%);
            width: 120px; height: 35px; background: #000; border-radius: 20px; z-index: 1000; pointer-events: none;
        }

        /* === 页面切换逻辑 === */
        .page-container {
            position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            overflow: hidden; background: linear-gradient(180deg, #F3E8FF 0%, #E8F4FD 50%, #E0F2FE 100%);
            transition: transform 0.35s cubic-bezier(0.32, 0.72, 0, 1), filter 0.3s;
            will-change: transform;
        }
        .page-home { z-index: 10; transform: translateX(0); background: linear-gradient(180deg, #F3E8FF 0%, #E8F4FD 50%, #E0F2FE 100%); }
        .aurora-orb { position: absolute; border-radius: 9999px; filter: blur(80px); opacity: 0.4; pointer-events: none; z-index: 0; }
        .glass-card { background: rgba(255,255,255,0.65); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.5); box-shadow: 0 8px 32px rgba(0,0,0,0.06), inset 0 1px 0 0 rgba(255,255,255,0.6); }
        .book-item.glass-card { background: rgba(255,255,255,0.7); backdrop-filter: blur(24px); -webkit-backdrop-filter: blur(24px); }
        .glass-card-gradient-border { position: relative; background: rgba(255,255,255,0.7); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); }
        .glass-card-gradient-border::before { content: ''; position: absolute; inset: 0; border-radius: 32px; padding: 2px; background: linear-gradient(135deg, rgba(106,44,112,0.3), rgba(139,92,246,0.25), rgba(6,182,212,0.3)); -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0); -webkit-mask-composite: xor; mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0); mask-composite: exclude; z-index: -1; }
        .btn-gradient-border { position: relative; background: rgba(255,255,255,0.9); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border: 2px solid transparent; transition: all 0.3s; }
        .btn-gradient-border::before { content: ''; position: absolute; inset: 0; border-radius: 16px; padding: 2px; background: linear-gradient(135deg, rgba(106,44,112,0.4), rgba(139,92,246,0.3), rgba(6,182,212,0.4)); -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0); -webkit-mask-composite: xor; mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0); mask-composite: exclude; z-index: -1; transition: opacity 0.3s; }
        .btn-gradient-border:hover { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(0,0,0,0.1); }
        .btn-gradient-border-purple::before { background: linear-gradient(135deg, rgba(106,44,112,0.5), rgba(139,92,246,0.4), rgba(147,51,234,0.4)); }
        .btn-gradient-border-orange::before { background: linear-gradient(135deg, rgba(249,115,22,0.5), rgba(251,146,60,0.4), rgba(234,88,12,0.4)); }
        .btn-gradient-border-cyan::before { background: linear-gradient(135deg, rgba(6,182,212,0.5), rgba(34,211,238,0.4), rgba(14,165,233,0.4)); }
        .recommend-card { transition: all 0.3s; }
        .recommend-card:hover { transform: translateY(-2px); box-shadow: 0 12px 40px rgba(0,0,0,0.08); }
        .icon-container { transition: transform 0.3s; }
        .recommend-card:hover .icon-container { transform: scale(1.1); }
        .glass-card-strong { background: rgba(255,255,255,0.75); backdrop-filter: blur(24px); -webkit-backdrop-filter: blur(24px); border: 1px solid rgba(255,255,255,0.6); box-shadow: 0 8px 30px rgb(0,0,0,0.06), inset 0 1px 0 0 rgba(255,255,255,0.6); }
        .gradient-border { position: relative; }
        .gradient-border::before { content: ''; position: absolute; inset: 0; border-radius: inherit; padding: 2px; background: linear-gradient(135deg, rgba(106,44,112,0.3), rgba(139,92,246,0.2), rgba(6,182,212,0.3)); -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0); -webkit-mask-composite: xor; mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0); mask-composite: exclude; }
        .text-gradient-brand { background: linear-gradient(to right, #6A2C70, #06B6D4); -webkit-background-clip: text; background-clip: text; color: transparent; }
        .btn-liquid { background: linear-gradient(to right, #6A2C70, #8B5CF6, #06B6D4); box-shadow: 0 10px 40px -10px rgba(139,92,246,0.35); transition: transform 0.2s; }
        .btn-liquid:hover, .btn-liquid:active { transform: scale(1.02); }
        .icon-keycap { background: linear-gradient(to bottom right, #fff, #F1F5F9); box-shadow: 0 2px 8px rgba(0,0,0,0.06); }
        .page-home.inactive-slide { transform: translateX(-25%); filter: brightness(0.9); }
        .page-home.inactive-scale { transform: scale(0.92); border-radius: 40px; filter: brightness(0.8); overflow: hidden; }

        .page-side { z-index: 20; transform: translateX(100%); background: linear-gradient(180deg, #F3E8FF 0%, #E8F4FD 50%, #E0F2FE 100%); }
        .page-side.active { transform: translateX(0); }


        /* === 视觉组件 === */
        .timeline-line { position: absolute; left: 19px; top: 0; bottom: 0; width: 2px; background-color: #E2E8F0; z-index: 0; }
        .filter-pill { padding: 6px 14px; border-radius: 999px; font-size: 11px; font-weight: 500; background: rgba(255,255,255,0.5); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); color: #64748B; transition: all 0.2s; white-space: nowrap; border: 1px solid rgba(255,255,255,0.3); }
        .filter-pill.active { background: rgba(239,246,255,0.8); color: #2563EB; font-weight: bold; border-color: rgba(37,99,235,0.3); }


        #toast {
            position: absolute; top: 60px; left: 50%; transform: translateX(-50%) translateY(-20px);
            background: rgba(0,0,0,0.8); color: white; padding: 10px 20px; border-radius: 24px;
            font-size: 13px; font-weight: 600; pointer-events: none; opacity: 0;
            transition: all 0.3s ease-out; z-index: 2000; box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            display: flex; align-items: center; gap: 8px;
        }
        #toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }

        .profile-entry { border-radius: 16px; padding: 4px 4px 4px 0; transition: background 0.2s, transform 0.1s; }
        .profile-entry:active { background: rgba(255,255,255,0.4); transform: scale(0.98); }
    </style>
</head>
<body>

    <div class="iphone-frame" id="app-root">
        
        <div class="dynamic-island"></div>
        <div id="toast"><svg class="w-4 h-4 text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" /></svg><span id="toast-msg">操作成功</span></div>

        <div id="page-home" class="page-container page-home flex flex-col pt-[50px] relative">
            <div class="aurora-orb w-64 h-64 bg-[#8B5CF6]/20 -top-32 -left-24"></div>
            <div class="aurora-orb w-72 h-72 bg-[#06B6D4]/20 bottom-32 -right-28"></div>
            <header class="px-5 pt-4 pb-4 sticky top-0 z-20 flex justify-between items-center">
                <div class="profile-entry flex items-center gap-3 cursor-pointer group flex-1 min-w-0" onclick="location.href='个人信息.html'">
                    <div class="w-11 h-11 rounded-full overflow-hidden border-2 border-white/80 shadow-[0_2px_8px_rgba(0,0,0,0.1)] flex items-center justify-center shrink-0">
                         <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=Felix" class="w-full h-full object-cover">
                    </div>
                    <div class="flex flex-col justify-center flex-1 min-w-0">
                        <div class="flex items-center gap-1">
                            <h1 class="text-xl font-bold text-slate-800 leading-none">Hi, 薛云腾</h1>
                            <svg class="w-4 h-4 text-slate-400 shrink-0 group-hover:text-slate-600 transition-colors" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
                        </div>
                        <p class="text-[11px] text-slate-700 mt-1 font-medium flex items-center gap-1"><span class="w-1.5 h-1.5 bg-green-500 rounded-full"></span>八年级 7 班 · 龙岗实验学校</p>
                    </div>
                </div>
                <button onclick="openHistory()" class="w-10 h-10 rounded-full flex items-center justify-center text-slate-700 bg-white/60 backdrop-blur-md border border-white/50 shadow-[0_2px_8px_rgba(0,0,0,0.08)] active:scale-95 transition-transform">
                    <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                </button>
            </header>

            <main class="flex-1 overflow-y-auto no-scrollbar px-4 space-y-4 pb-8 relative z-10">
                <section class="grid grid-cols-2 gap-3">
                    <div onclick="goToCorrection('correction')" class="bg-gradient-to-b from-[#6A2C70] to-[#8B5CF6] rounded-[32px] p-4 text-white card-press cursor-pointer relative overflow-hidden h-36 flex flex-col items-center justify-center group shadow-lg shadow-purple-500/25">
                        <div class="w-12 h-12 rounded-full bg-white/20 backdrop-blur-sm border-2 border-white/30 flex items-center justify-center mb-3">
                            <svg class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                        </div>
                        <h3 class="font-bold text-lg leading-tight text-center mb-1">作业批改</h3>
                        <p class="text-white/90 text-[11px] text-center font-medium">拍一拍，秒出解析</p>
                    </div>

                    <div onclick="goToCorrection('qa')" class="glass-card rounded-[32px] p-4 text-slate-800 card-press cursor-pointer relative overflow-hidden h-36 flex flex-col items-center justify-center">
                        <div class="w-12 h-12 rounded-full bg-slate-100/50 border-2 border-slate-200/60 flex items-center justify-center mb-3">
                            <svg class="w-6 h-6 text-[#06B6D4]" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" /></svg>
                        </div>
                        <h3 class="font-bold text-lg leading-tight text-center text-slate-800 mb-1">拍照答疑</h3>
                        <p class="text-slate-600 text-[11px] text-center">AI 1对1 视频讲解</p>
                    </div>
                </section>

                <section onclick="openBook()" class="card-press cursor-pointer">
                    <div class="glass-card rounded-[32px] p-4 flex items-center justify-between h-[88px]">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 rounded-full bg-slate-100/50 border-2 border-slate-200/60 flex items-center justify-center shrink-0">
                                <svg class="w-6 h-6 text-orange-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" /></svg>
                            </div>
                            <div class="flex flex-col justify-center">
                                <h3 class="font-bold text-lg text-slate-800">我的错题本</h3>
                                <p id="notebook-hint" class="text-[11px] text-slate-600 mt-1">待复习 <span id="review-count" class="text-slate-800 font-bold">3</span> 题</p>
                            </div>
                        </div>
                        <div class="w-8 h-8 flex items-center justify-center">
                            <svg class="w-5 h-5 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
                        </div>
                    </div>
                </section>

                <section onclick="openErase()" class="card-press cursor-pointer">
                    <div class="glass-card rounded-[32px] p-4 flex items-center justify-between">
                        <div class="flex items-center gap-4">
                            <div class="w-12 h-12 rounded-full bg-slate-100/50 border-2 border-slate-200/60 flex items-center justify-center shrink-0">
                                <svg class="w-6 h-6 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg>
                            </div>
                            <div class="flex flex-col justify-center flex-1">
                                <h3 class="font-bold text-lg text-slate-800">试卷擦除</h3>
                                <p class="text-[11px] text-slate-600 mt-1">AI 还原空白试卷</p>
                            </div>
                        </div>
                        <div class="w-8 h-8 flex items-center justify-center">
                            <svg class="w-5 h-5 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
                        </div>
                    </div>
                </section>
                
                 <section>
                    <div class="flex items-center justify-between mb-3 px-1 mt-2">
                        <h2 class="text-base font-bold text-slate-800">推荐</h2>
                    </div>
                    <div class="space-y-2 pb-8">
                        <div class="recommend-card glass-card rounded-[24px] p-4 flex items-center gap-4 cursor-pointer group" onclick="goRecommend('quanguo','全区高频','每日一练:几何基础')">
                            <div class="icon-container w-12 h-12 rounded-2xl bg-gradient-to-br from-purple-100 to-purple-200/60 flex items-center justify-center shrink-0 shadow-sm group-hover:shadow-md transition-shadow">
                                <svg class="w-6 h-6 text-purple-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                            </div>
                            <div class="flex-1 min-w-0">
                                <div class="flex items-center gap-2 mb-1.5">
                                    <span class="bg-green-50 border border-green-200/60 text-green-700 text-[10px] px-2.5 py-1 rounded-md font-semibold">全区高频</span>
                                </div>
                                <h3 class="text-sm font-bold text-slate-800 leading-snug">每日一练:几何基础</h3>
                            </div>
                            <button onclick="event.stopPropagation(); goRecommend('quanguo','全区高频','每日一练:几何基础')" class="w-9 h-9 rounded-xl bg-purple-50 border border-purple-200/60 flex items-center justify-center shrink-0 group-hover:bg-purple-100 transition-colors">
                                <svg class="w-4 h-4 text-purple-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
                            </button>
                        </div>
                        
                        <div class="recommend-card glass-card rounded-[24px] p-4 flex items-center gap-4 cursor-pointer group" onclick="goRecommend('cuoti','错题重练','分式与二次根式巩固')">
                            <div class="icon-container w-12 h-12 rounded-2xl bg-gradient-to-br from-orange-100 to-orange-200/60 flex items-center justify-center shrink-0 shadow-sm group-hover:shadow-md transition-shadow">
                                <svg class="w-6 h-6 text-orange-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                            </div>
                            <div class="flex-1 min-w-0">
                                <div class="flex items-center gap-2 mb-1.5">
                                    <span class="bg-orange-50 border border-orange-200/60 text-orange-700 text-[10px] px-2.5 py-1 rounded-md font-semibold">错题重练</span>
                                </div>
                                <h3 class="text-sm font-bold text-slate-800 leading-snug">分式与二次根式巩固</h3>
                            </div>
                            <button onclick="event.stopPropagation(); goRecommend('cuoti','错题重练','分式与二次根式巩固')" class="w-9 h-9 rounded-xl bg-orange-50 border border-orange-200/60 flex items-center justify-center shrink-0 group-hover:bg-orange-100 transition-colors">
                                <svg class="w-4 h-4 text-orange-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
                            </button>
                        </div>
                        
                        <div class="recommend-card glass-card rounded-[24px] p-4 flex items-center gap-4 cursor-pointer group" onclick="goRecommend('juyi','举一反三','一次函数综合应用')">
                            <div class="icon-container w-12 h-12 rounded-2xl bg-gradient-to-br from-cyan-100 to-cyan-200/60 flex items-center justify-center shrink-0 shadow-sm group-hover:shadow-md transition-shadow">
                                <svg class="w-6 h-6 text-cyan-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" /></svg>
                            </div>
                            <div class="flex-1 min-w-0">
                                <div class="flex items-center gap-2 mb-1.5">
                                    <span class="bg-cyan-50 border border-cyan-200/60 text-cyan-700 text-[10px] px-2.5 py-1 rounded-md font-semibold">举一反三</span>
                                </div>
                                <h3 class="text-sm font-bold text-slate-800 leading-snug">一次函数综合应用</h3>
                            </div>
                            <button onclick="event.stopPropagation(); goRecommend('juyi','举一反三','一次函数综合应用')" class="w-9 h-9 rounded-xl bg-cyan-50 border border-cyan-200/60 flex items-center justify-center shrink-0 group-hover:bg-cyan-100 transition-colors">
                                <svg class="w-4 h-4 text-cyan-600" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
                            </button>
                        </div>
                    </div>
                </section>
            </main>
        </div>

        <div id="page-book" class="page-container page-side flex flex-col pt-[50px] relative">
            <div class="aurora-orb w-64 h-64 bg-[#8B5CF6]/20 -top-32 -left-24"></div>
            <div class="aurora-orb w-72 h-72 bg-[#06B6D4]/20 bottom-32 -right-28"></div>
            <header class="sticky top-0 z-30 pb-0">
                <div class="px-5 pt-4 pb-3 flex justify-between items-center relative">
                    <div class="flex items-center gap-1">
                        <button onclick="closeBook()" class="p-2 -ml-1 active:opacity-60">
                            <svg class="w-6 h-6 text-slate-800" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg>
                        </button>
                        <h1 class="text-lg font-bold text-slate-800">错题本</h1>
                    </div>
                </div>
                <div class="flex items-center justify-between pl-5 pr-2 pb-2">
                     <div class="flex overflow-x-auto no-scrollbar gap-6 flex-1">
                        <div onclick="selectSubject('all', this)" class="subject-tab pb-2 border-b-2 border-blue-600 text-blue-600 font-bold text-sm whitespace-nowrap cursor-pointer">全部</div>
                        <div onclick="selectSubject('math', this)" class="subject-tab pb-2 border-b-2 border-transparent text-slate-400 font-medium text-sm whitespace-nowrap cursor-pointer">数学</div>
                        <div onclick="selectSubject('eng', this)" class="subject-tab pb-2 border-b-2 border-transparent text-slate-400 font-medium text-sm whitespace-nowrap cursor-pointer">英语</div>
                    </div>
                </div>
                <div id="sub-filter-row" class="hidden px-5 py-3 flex gap-2 overflow-x-auto no-scrollbar">
                    <div class="filter-pill active">全部(24)</div>
                    <div class="filter-pill">单选题(6)</div>
                    <div class="filter-pill">填空题(4)</div>
                    <div class="filter-pill">解答题(13)</div>
                </div>
            </header>

            <main id="book-content" class="flex-1 overflow-y-auto no-scrollbar px-4 relative pb-[120px] z-10">
                <div class="relative py-4" id="book-timeline-today">
                    <div class="timeline-line left-[17px]"></div>
                    <div class="relative z-10 flex items-center mb-3">
                        <div class="w-2.5 h-2.5 bg-blue-600 rounded-full ring-4 ring-white/60 shadow-sm"></div>
                        <span class="ml-3 text-sm font-bold text-slate-800">今天</span>
                    </div>
                    <div class="book-item ml-5 glass-card rounded-[24px] p-3 mb-4 flex gap-3" data-subject="math">
                        <div class="w-20 h-20 bg-gray-100 rounded-lg shrink-0 overflow-hidden border border-gray-100">
                             <img src="https://placehold.co/100x100/e2e8f0/94a3b8?text=Math" class="w-full h-full object-cover">
                        </div>
                        <div class="flex-1 flex flex-col justify-between py-0.5">
                            <div>
                                <span class="text-[9px] text-blue-600 bg-blue-50 px-1.5 py-0.5 rounded mb-1 inline-block font-medium">数学</span>
                                <img src="https://placehold.co/300x80?text=题目原图" class="w-full h-12 object-cover rounded mt-1 opacity-80 border border-slate-100">
                            </div>
                            <div class="flex gap-2 justify-end mt-1"><button class="px-2 py-0.5 border border-gray-200 rounded text-[10px] text-slate-400">详情</button></div>
                        </div>
                    </div>
                </div>
                
                <div class="relative pb-5">
                    <div class="timeline-line left-[17px]"></div>
                    <div class="relative z-10 flex items-center mb-3">
                        <div class="w-2.5 h-2.5 bg-gray-300 rounded-full ring-4 ring-white/60"></div>
                        <span class="ml-3 text-sm font-bold text-slate-500">昨天</span>
                    </div>
                    <div class="book-item ml-5 glass-card rounded-[24px] p-3 mb-4 flex gap-3 opacity-90" data-subject="eng">
                        <div class="w-20 h-20 bg-gray-100 rounded-lg shrink-0 overflow-hidden border border-gray-100">
                             <img src="https://placehold.co/100x100/e2e8f0/94a3b8?text=Eng" class="w-full h-full object-cover grayscale opacity-80">
                        </div>
                        <div class="flex-1 flex flex-col justify-between py-0.5">
                            <div>
                                <span class="text-[9px] text-purple-600 bg-purple-50 px-1.5 py-0.5 rounded mb-1 inline-block font-medium">英语</span>
                                <img src="https://placehold.co/300x80?text=题目原图" class="w-full h-12 object-cover rounded mt-1 opacity-80 border border-slate-100">
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>

        <div id="page-history" class="page-container page-side flex flex-col pt-[50px]">
            <header class="sticky top-0 z-30 pt-2 pb-3 px-2 flex justify-between items-center">
                <div class="flex items-center gap-1">
                    <button onclick="closeHistory()" class="p-2 -ml-1 active:opacity-60">
                        <svg class="w-6 h-6 text-slate-800" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg>
                    </button>
                    <h1 class="text-lg font-bold text-slate-800">历史记录</h1>
                </div>
            </header>
            <main class="flex-1 overflow-y-auto no-scrollbar p-0 relative pb-[120px]">
                <div class="relative px-4 py-4 flex flex-col items-center">
                    <div class="w-full max-w-sm bg-white rounded-xl p-3 shadow-sm mb-3 border border-slate-50">
                        <div class="flex justify-between items-start mb-1">
                            <span class="text-[10px] text-blue-600 font-bold bg-blue-50 px-1.5 py-0.5 rounded">作业批改</span>
                            <span class="text-[10px] text-gray-400">今天 10:20</span>
                        </div>
                        <h4 class="text-sm font-bold text-slate-700 leading-snug">第十章 分式 (1)</h4>
                        <p class="text-[11px] text-gray-400 mt-1">8 题 · 1 题错误</p>
                    </div>
                    <div class="w-full max-w-sm bg-white rounded-xl p-3 shadow-sm mb-3 border border-slate-50">
                        <div class="flex justify-between items-start mb-1">
                            <span class="text-[10px] text-purple-600 font-bold bg-purple-50 px-1.5 py-0.5 rounded">拍照答疑</span>
                            <span class="text-[10px] text-gray-400">昨天 18:30</span>
                        </div>
                        <h4 class="text-sm font-bold text-slate-700 leading-snug">二次函数压轴题</h4>
                        <p class="text-[11px] text-gray-400 mt-1">AI 老师讲解 2 分 15 秒</p>
                    </div>
                </div>
            </main>
        </div>


    </div>

    <script>
        const homePage = document.getElementById('page-home');
        const bookPage = document.getElementById('page-book');
        const historyPage = document.getElementById('page-history');
        
        let reviewCount = 3;

        // === 1. 首页逻辑 ===
        function goToCorrection(mode) {
            sessionStorage.setItem('cameraMode', mode);
            window.location.href = '作业批改.html?mode=' + mode;
        }
        function openBook() {
            // 跳转到错题本页面
            window.location.href = '../错题本/错题本 01.html';
        }

        function openErase() {
            // 跳转到试卷擦除页面
            window.location.href = '../试卷擦除/试卷擦除.html';
        }

        function goRecommend(type, tagName, title) {
            sessionStorage.setItem('recommendType', type);
            sessionStorage.setItem('recommendTag', tagName);
            sessionStorage.setItem('recommendTitle', title);
            window.location.href = '推荐练习.html';
        }

        function closeBook() {
            homePage.classList.remove('inactive-slide');
            bookPage.classList.remove('active');
        }

        function openHistory() {
            homePage.classList.add('inactive-slide');
            historyPage.classList.add('active');
        }

        function closeHistory() {
            homePage.classList.remove('inactive-slide');
            historyPage.classList.remove('active');
        }

        function selectSubject(subj, el) {
            document.querySelectorAll('.subject-tab').forEach(t => {
                t.classList.remove('border-blue-600', 'text-blue-600', 'font-bold');
                t.classList.add('border-transparent', 'text-slate-400', 'font-medium');
            });
            el.classList.remove('border-transparent', 'text-slate-400', 'font-medium');
            el.classList.add('border-blue-600', 'text-blue-600', 'font-bold');

            const subFilterRow = document.getElementById('sub-filter-row');
            if (subj === 'all') {
                subFilterRow.classList.add('hidden');
            } else {
                subFilterRow.classList.remove('hidden');
            }

            const items = document.querySelectorAll('.book-item');
            items.forEach(item => {
                const itemSubj = item.getAttribute('data-subject');
                if (subj === 'all') {
                    item.classList.remove('hidden');
                } else {
                    if (itemSubj === subj) {
                        item.classList.remove('hidden');
                    } else {
                        item.classList.add('hidden');
                    }
                }
            });
        }

        function showToast(msg) {
            const toast = document.getElementById('toast');
            document.getElementById('toast-msg').innerText = msg;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 2000);
        }
    </script>
</body>
</html>
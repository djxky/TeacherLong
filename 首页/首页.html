<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>AI 龙老师 - 首页</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+SC:wght@400;500;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', 'Noto Sans SC', sans-serif; background: #f4f4f5; display: flex; align-items: center; justify-content: center; min-height: 100vh; margin: 0; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .card-press:active { transform: scale(0.98); transition: transform 0.15s ease; }
        .iphone-frame {
            width: 393px; height: 852px; position: relative; overflow: hidden;
            background: linear-gradient(175deg, #faf5ff 0%, #f5f3ff 30%, #eff6ff 60%, #ecfeff 100%);
            box-shadow: 0 0 0 12px #18181b, 0 0 0 14px #27272a, 0 24px 48px -12px rgba(24,24,27,0.2);
            border-radius: 50px;
        }
        .dynamic-island { position: absolute; top: 11px; left: 50%; transform: translateX(-50%); width: 120px; height: 35px; background: linear-gradient(180deg, #27272a 0%, #18181b 100%); border-radius: 20px; z-index: 1000; pointer-events: none; }
        .aurora-orb { position: absolute; border-radius: 9999px; filter: blur(120px); pointer-events: none; z-index: 0; opacity: 0.5; animation: aurora-pulse 12s ease-in-out infinite; }
        .aurora-orb:nth-child(2) { animation-delay: -4s; }
        .aurora-orb:nth-child(3) { animation-delay: -8s; }
        @keyframes aurora-pulse { 0%, 100% { opacity: 0.4; transform: scale(1); } 50% { opacity: 0.6; transform: scale(1.05); } }
        .tab-panel { display: none !important; visibility: hidden; pointer-events: none; }
        .tab-panel.active { display: flex !important; visibility: visible; pointer-events: auto; flex-direction: column; min-height: 0; }
        .tab-content-slot { flex: 1; min-height: 0; position: relative; padding-bottom: env(safe-area-inset-bottom, 0); }
        .tab-content-slot .tab-panel { position: absolute; inset: 0; flex: none; }
        .home-scroll {
            flex: 1; min-height: 0; overflow-y: auto; overflow-x: hidden;
            -webkit-overflow-scrolling: touch; position: relative; z-index: 1;
        }
        .home-scroll::-webkit-scrollbar { display: none; }
        .top-bar-btn {
            position: absolute; top: 12px; z-index: 20;
            width: 44px; height: 44px; border-radius: 14px;
            display: flex; align-items: center; justify-content: center;
            color: #6366f1; background: rgba(255,255,255,0.9);
            backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(226,232,240,0.9);
            box-shadow: 0 2px 12px rgba(0,0,0,0.06);
            cursor: pointer; transition: transform 0.15s, box-shadow 0.2s;
        }
        .top-bar-btn:active { transform: scale(0.95); box-shadow: 0 1px 6px rgba(0,0,0,0.08); }
        .top-bar-btn.history { right: 16px; }
        .top-bar-btn.me { right: 68px; }
        .me-panel-header {
            height: 56px; padding: 0 16px; padding-top: env(safe-area-inset-top);
            display: flex; align-items: center; gap: 12px; flex-shrink: 0;
            background: rgba(255,255,255,0.92); backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(226,232,240,0.9);
        }
        .me-panel-back {
            width: 40px; height: 40px; border-radius: 12px;
            display: flex; align-items: center; justify-content: center;
            color: #52525b; cursor: pointer; transition: background 0.2s, color 0.2s;
        }
        .me-panel-back:active { background: rgba(0,0,0,0.06); color: #18181b; }
        .me-panel-header h2 { font-size: 1.125rem; font-weight: 600; color: #18181b; margin: 0; }
        #toast {
            position: absolute; top: 60px; left: 50%; transform: translateX(-50%) translateY(-20px);
            background: linear-gradient(135deg, #4f46e5 0%, #6366f1 100%); color: white; padding: 12px 24px; border-radius: 9999px;
            font-size: 13px; font-weight: 600; pointer-events: none; opacity: 0;
            transition: all 0.3s ease-out; z-index: 2000; box-shadow: 0 8px 24px rgba(99,102,241,0.35);
            display: flex; align-items: center; gap: 8px;
        }
        #toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }
        /* 欢迎区：无背景无外框，龙 + 文字直接叠在页面上 */
        .greeting-card {
            background: transparent;
            border: none;
            border-radius: 0;
            padding: 1.25rem 0 1.25rem 0;
            margin-bottom: 1.5rem;
            box-shadow: none;
        }
        .greeting-row {
            display: flex; align-items: center; gap: 1rem;
        }
        .greeting-row .companion-avatar-wrap { flex-shrink: 0; }
        .companion-avatar-wrap { position: relative; display: flex; align-items: center; justify-content: center; }
        .companion-avatar-wrap::before {
            content: ''; position: absolute; width: 180%; height: 180%; border-radius: 50%;
            background: radial-gradient(circle, rgba(99,102,241,0.15) 0%, rgba(34,211,238,0.1) 50%, transparent 70%);
            filter: blur(28px); pointer-events: none; z-index: 0;
        }
        .dragon-front {
            position: relative; z-index: 10; transform: scaleX(-1);
            filter: drop-shadow(0 8px 24px rgba(99,102,241,0.2));
        }
        .greeting-bubble { flex: 1; min-width: 0; }
        .greeting-bubble h1 { font-size: 1.25rem; font-weight: 600; color: #18181b; margin: 0; line-height: 1.35; letter-spacing: -0.03em; }
        .greeting-bubble p { font-size: 0.8125rem; color: #52525b; margin: 0.4rem 0 0 0; line-height: 1.45; }
        /* Bento 主卡片：AI 风格紫靛 + 青，柔和光感 */
        .bento-hero {
            background: linear-gradient(135deg, #4f46e5 0%, #6366f1 45%, #818cf8 100%);
            color: white; border-radius: 20px; padding: 1.25rem 1.25rem; min-height: 104px;
            display: flex; align-items: center; gap: 1rem; flex-wrap: nowrap;
            box-shadow: 0 20px 48px -16px rgba(99,102,241,0.45), 0 0 0 1px rgba(255,255,255,0.15) inset;
            position: relative; z-index: 5; touch-action: manipulation; -webkit-tap-highlight-color: transparent;
            transition: transform 0.15s ease, box-shadow 0.2s ease;
        }
        .bento-hero::after {
            content: ''; position: absolute; inset: 0; border-radius: 20px; pointer-events: none;
            background: linear-gradient(135deg, rgba(255,255,255,0.15) 0%, transparent 50%);
        }
        .bento-hero .icon-wrap { width: 52px; height: 52px; border-radius: 14px; background: rgba(255,255,255,0.25); border: 1px solid rgba(255,255,255,0.35); display: flex; align-items: center; justify-content: center; flex-shrink: 0; position: relative; z-index: 1; }
        .bento-hero h3 { font-size: 1.0625rem; font-weight: 600; margin: 0; position: relative; z-index: 1; letter-spacing: -0.02em; }
        .bento-hero p { font-size: 0.75rem; opacity: 0.9; margin: 0.3rem 0 0 0; position: relative; z-index: 1; }
        .bento-strip {
            background: linear-gradient(135deg, #0d9488 0%, #14b8a6 50%, #2dd4bf 100%);
            color: white; border-radius: 20px; padding: 1.25rem 1.25rem; min-height: 104px;
            display: flex; align-items: center; gap: 1rem; flex-wrap: nowrap;
            box-shadow: 0 20px 48px -16px rgba(20,184,166,0.4), 0 0 0 1px rgba(255,255,255,0.15) inset;
            position: relative; z-index: 5; touch-action: manipulation; -webkit-tap-highlight-color: transparent;
            transition: transform 0.15s ease, box-shadow 0.2s ease;
        }
        .bento-strip::after {
            content: ''; position: absolute; inset: 0; border-radius: 20px; pointer-events: none;
            background: linear-gradient(135deg, rgba(255,255,255,0.15) 0%, transparent 50%);
        }
        .bento-strip .icon-wrap { width: 52px; height: 52px; border-radius: 14px; background: rgba(255,255,255,0.25); border: 1px solid rgba(255,255,255,0.35); display: flex; align-items: center; justify-content: center; flex-shrink: 0; position: relative; z-index: 1; }
        .bento-strip h3 { font-size: 1.0625rem; font-weight: 600; margin: 0; position: relative; z-index: 1; letter-spacing: -0.02em; }
        .bento-strip p { font-size: 0.75rem; opacity: 0.9; margin: 0.3rem 0 0 0; position: relative; z-index: 1; }
        /* 拍照解题：绿色长条 */
        .bento-strip-green {
            background: linear-gradient(135deg, #059669 0%, #10b981 50%, #34d399 100%);
            box-shadow: 0 20px 48px -16px rgba(16,185,129,0.45), 0 0 0 1px rgba(255,255,255,0.15) inset;
        }
        .bento-strip-green::after {
            content: ''; position: absolute; inset: 0; border-radius: 20px; pointer-events: none;
            background: linear-gradient(135deg, rgba(255,255,255,0.15) 0%, transparent 50%);
        }
        /* 底部快捷入口：浅色卡片，AI 感保留 */
        .bento-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 0.75rem; }
        .bento-grid-3 {
            grid-template-columns: repeat(3, 1fr);
            gap: 0.5rem;
        }
        .bento-cell {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px);
            border-radius: 16px;
            padding: 1rem 0.5rem;
            min-height: 96px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            border: 1px solid rgba(226,232,240,0.9);
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
            cursor: pointer;
            transition: transform 0.15s ease, background 0.2s ease, box-shadow 0.2s ease;
        }
        .bento-cell:active {
            transform: scale(0.96);
            background: rgba(248,250,252,0.98);
            box-shadow: 0 2px 12px rgba(0,0,0,0.06);
        }
        .bento-cell .icon-wrap {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        .bento-cell .icon-wrap svg {
            width: 24px;
            height: 24px;
        }
        .bento-cell h3 {
            font-size: 0.8125rem;
            font-weight: 600;
            color: #18181b;
            margin: 0;
            text-align: center;
            line-height: 1.3;
            letter-spacing: -0.01em;
        }
        .bento-cell p {
            font-size: 0.6875rem;
            color: #71717a;
            margin: 0;
            line-height: 1.3;
            text-align: center;
        }
        .bento-cell-green .icon-wrap {
            background: rgba(20,184,166,0.14);
            box-shadow: 0 0 20px -4px rgba(20,184,166,0.2);
        }
        .bento-cell-green .icon-wrap svg { color: #0d9488; }
        .bento-cell-orange .icon-wrap {
            background: rgba(251,146,60,0.14);
            box-shadow: 0 0 20px -4px rgba(251,146,60,0.2);
        }
        .bento-cell-orange .icon-wrap svg { color: #ea580c; }
        .bento-cell-violet .icon-wrap {
            background: rgba(99,102,241,0.14);
            box-shadow: 0 0 20px -4px rgba(99,102,241,0.2);
        }
        .bento-cell-violet .icon-wrap svg { color: #6366f1; }
        /* 一期底部 Tab：首页、我的 */
        .tab-bar { height: 56px; background: rgba(255,255,255,0.92); backdrop-filter: blur(16px); border-top: 1px solid rgba(226,232,240,0.9); display: flex; align-items: center; justify-content: space-around; padding-bottom: env(safe-area-inset-bottom); z-index: 100; flex-shrink: 0; }
        .tab-item { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; gap: 2px; padding: 6px 0; cursor: pointer; transition: color 0.2s; color: #94a3b8; }
        .tab-item.active { color: #6366f1; font-weight: 600; }
        .tab-item svg { width: 22px; height: 22px; }
        .tab-item span { font-size: 11px; }
        /* 我的：用户信息与退出登录 */
        .me-info-card {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(16px);
            border-radius: 16px;
            border: 1px solid rgba(226,232,240,0.9);
            box-shadow: 0 4px 20px rgba(0,0,0,0.05);
            overflow: hidden;
        }
        .me-info-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 1.25rem;
            border-bottom: 1px solid rgba(226,232,240,0.8);
            font-size: 0.9375rem;
        }
        .me-info-row:last-child { border-bottom: none; }
        .me-info-label { color: #64748b; font-weight: 500; }
        .me-info-value { color: #18181b; font-weight: 600; }
        .btn-logout {
            width: 100%;
            margin-top: 1.5rem;
            padding: 0.875rem 1.5rem;
            border-radius: 14px;
            font-size: 1rem;
            font-weight: 600;
            color: #fff;
            background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
            border: none;
            cursor: pointer;
            transition: transform 0.15s, box-shadow 0.2s;
            box-shadow: 0 4px 16px rgba(99,102,241,0.35);
        }
        .btn-logout:active { transform: scale(0.98); }
    </style>
</head>
<body>

    <div class="iphone-frame flex flex-col" id="app-root">
        <div class="dynamic-island"></div>
        <div id="toast"><svg class="w-4 h-4 text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" /></svg><span id="toast-msg">操作成功</span></div>

        <!-- 内容区：一期两 Tab 面板（首页、我的） -->
        <div class="flex-1 min-h-0 flex flex-col pt-[50px] relative">
            <div class="aurora-orb w-80 h-80 bg-[#818cf8]/28 -top-40 -left-32"></div>
            <div class="aurora-orb w-72 h-72 bg-[#2dd4bf]/22 bottom-40 -right-36"></div>

            <div class="tab-content-slot flex-1 min-h-0 relative z-10">
            <!-- Tab1: 首页（无顶栏，仅右上角历史记录） -->
            <div id="panel-home" class="tab-panel active flex flex-col min-h-0 relative">
                <button type="button" onclick="openHistory()" class="top-bar-btn history" title="历史记录" aria-label="历史记录">
                    <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                </button>
                <div class="home-scroll">
                    <div class="px-4 pt-2 pb-6">
                    <!-- 欢迎区：首页不展示个人信息，仅通用问候；个人信息在「我的」Tab 展示 -->
                    <section class="greeting-card">
                        <div class="greeting-row">
                            <div class="companion-avatar-wrap" style="width: 160px; height: 160px;">
                                <img src="dragon.png" alt="龙老师" class="dragon-front w-full h-full object-contain object-center" style="width: 160px; height: 160px;">
                            </div>
                            <div class="greeting-bubble">
                                <h1>HI <span id="home-greeting-name">同学</span></h1>
                                <p>我是龙老师，你的 AI 学伴</p>
                            </div>
                        </div>
                    </section>
                    <!-- 功能区：长条入口（AI 作业批改、拍照解题）+ 方形入口（试卷擦除、上传错题、错题本） -->
                    <section class="space-y-4" style="position:relative;z-index:2;">
                        <div role="button" tabindex="0" class="bento-hero card-press cursor-pointer no-underline text-inherit" onclick="goToCorrection('correction')" onkeydown="if(event.key==='Enter'||event.key===' ') { event.preventDefault(); goToCorrection('correction'); }">
                            <div class="icon-wrap">
                                <svg class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z" /><path stroke-linecap="round" stroke-linejoin="round" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z" /></svg>
                            </div>
                            <div class="bento-card-text flex-1 min-w-0">
                                <h3>AI 作业批改</h3>
                                <p>拍作业，秒出解析</p>
                            </div>
                            <svg class="bento-card-arrow w-5 h-5 text-white/90 flex-shrink-0 relative z-[1]" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
                        </div>
                        <div role="button" tabindex="0" class="bento-strip card-press cursor-pointer no-underline text-inherit" onclick="openAiJiangTi()" onkeydown="if(event.key==='Enter'||event.key===' ') { event.preventDefault(); openAiJiangTi(); }">
                            <div class="icon-wrap">
                                <svg class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" /></svg>
                            </div>
                            <div class="bento-card-text flex-1 min-w-0">
                                <h3>拍照解题</h3>
                                <p>AI 分步讲解</p>
                            </div>
                            <svg class="bento-card-arrow w-5 h-5 text-white/90 flex-shrink-0 relative z-[1]" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
                        </div>
                        <div class="bento-grid bento-grid-3">
                            <div onclick="openBook()" class="bento-cell bento-cell-violet">
                                <div class="icon-wrap">
                                    <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" /></svg>
                                </div>
                                <h3>错题本</h3>
                            </div>
                            <div onclick="openBook()" class="bento-cell bento-cell-orange">
                                <div class="icon-wrap">
                                    <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" /></svg>
                                </div>
                                <h3>上传错题</h3>
                            </div>
                            <div onclick="openErase()" class="bento-cell bento-cell-green">
                                <div class="icon-wrap">
                                    <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" /></svg>
                                </div>
                                <h3>试卷擦除</h3>
                            </div>
                        </div>
                    </section>
                    </div>
                </div>
            </div>

            <!-- 我的面板：用户信息 + 退出登录 -->
            <div id="panel-me" class="tab-panel flex flex-col relative overflow-hidden">
                <main class="flex-1 overflow-y-auto no-scrollbar px-4 pt-6 pb-8">
                    <div class="me-info-card">
                        <div class="me-info-row">
                            <span class="me-info-label">手机号</span>
                            <span id="me-phone" class="me-info-value">138****5678</span>
                        </div>
                        <div class="me-info-row">
                            <span class="me-info-label">学校名称</span>
                            <span id="me-school" class="me-info-value">某某中学</span>
                        </div>
                        <div class="me-info-row">
                            <span class="me-info-label">班级名称</span>
                            <span id="me-class" class="me-info-value">八年级 7 班</span>
                        </div>
                        <div class="me-info-row">
                            <span class="me-info-label">姓名</span>
                            <span id="me-name" class="me-info-value">薛云腾</span>
                        </div>
                    </div>
                    <button type="button" class="btn-logout" onclick="logout()">退出登录</button>
                </main>
            </div>
            </div>
        </div>

        <!-- 底部 Tab（一期）：首页、我的 -->
        <nav class="tab-bar">
            <div class="tab-item active" data-tab="home" onclick="switchTab('home')">
                <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" /></svg>
                <span>首页</span>
            </div>
            <div class="tab-item" data-tab="me" onclick="switchTab('me')">
                <svg fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
                <span>我的</span>
            </div>
        </nav>
    </div>

    <script>
        function switchTab(tab) {
            document.querySelectorAll('.tab-panel').forEach(p => p.classList.remove('active'));
            document.querySelectorAll('.tab-item').forEach(t => t.classList.remove('active'));
            const panel = document.getElementById('panel-' + tab);
            const item = document.querySelector('.tab-item[data-tab="' + tab + '"]');
            if (panel) panel.classList.add('active');
            if (item) item.classList.add('active');
        }
        function goToCorrection(mode) {
            sessionStorage.setItem('cameraMode', mode);
            window.location.href = '作业批改.html?mode=' + mode;
        }
        function openAiJiangTi() {
            sessionStorage.setItem('cameraMode', 'qa');
            window.location.href = '作业批改.html?mode=qa';
        }
        function openBook() {
            window.location.href = '../错题本/错题本 01.html';
        }
        function openErase() {
            window.location.href = '../试卷擦除/试卷擦除.html';
        }
        function openHistory() {
            showToast('历史记录（可跳转独立页）');
        }
        function showToast(msg) {
            const toast = document.getElementById('toast');
            document.getElementById('toast-msg').textContent = msg;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 2000);
        }
        // 从 sessionStorage 读取登录态用户信息（与登录页约定 key）
        function loadMeInfo() {
            const phone = sessionStorage.getItem('phone') || '138****5678';
            const school = sessionStorage.getItem('school') || '某某中学';
            const cls = sessionStorage.getItem('gradeClass') || '八年级 7 班';
            const name = sessionStorage.getItem('name') || '';
            const el = id => document.getElementById(id);
            if (el('me-phone')) el('me-phone').textContent = phone;
            if (el('me-school')) el('me-school').textContent = school;
            if (el('me-class')) el('me-class').textContent = cls;
            if (el('me-name')) el('me-name').textContent = name || '薛云腾';
            // 首页问候：展示学生输入的姓名，如「HI 薛云腾同学」
            if (el('home-greeting-name')) el('home-greeting-name').textContent = name ? name + '同学' : '同学';
        }
        function logout() {
            sessionStorage.removeItem('phone');
            sessionStorage.removeItem('school');
            sessionStorage.removeItem('gradeClass');
            sessionStorage.removeItem('name');
            sessionStorage.removeItem('loggedIn');
            window.location.href = '../登录/index.html';
        }
        // 委托点击：确保在 Chrome 滚动容器内点击也能跳转
        document.getElementById('app-root').addEventListener('click', function(e) {
            var card = e.target.closest('.bento-hero');
            if (card) { e.preventDefault(); goToCorrection('correction'); return; }
            card = e.target.closest('.bento-strip');
            if (card) { e.preventDefault(); openAiJiangTi(); }
        }, true);
        loadMeInfo();
    </script>
</body>
</html>
